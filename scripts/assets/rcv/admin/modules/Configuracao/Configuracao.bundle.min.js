window.__BUNDLED__MODULES__ = true;!function(a,b){!function(){var a=".lista-certificadores .section-header{padding-bottom:0}.lista-certificadores .section-header h2{margin-bottom:0}.lista-certificadores .list-view-pf-view{margin-top:0}.lista-certificadores .list-view-pf-view .list-group-item:first-child{border-top:0}.lista-certificadores .list-view-pf-view .list-group-item:last-child{border-bottom:1px solid #f5f5f5}.lista-certificadores .blank-slate-pf{border-top:0;border-right:0;border-left:0}",b=document.createElement("style");if(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet)b.styleSheet.disabled||(b.styleSheet.cssText=a);else try{b.innerHTML=a}catch(c){b.innerText=a}}(),function(a){"use strict";function b(a){a.requestFilter=function(a){if(a.url.indexOf(!1))return!1}}angular.module("Configuracao",[]).config(b),b.$inject=["blockUIConfig"]}(window),function(a){function b(a,c,d){var e=c.params.id,f=!e||""===e;if(a.pagina.titulo=f?"Cadastrar Agente de Certificação":"Editar Agente de Certificação",a.pagina.subTitulo="",a.pagina.classTitulo="",a.pagina.ajudaTemplateUrl="",a.pagina.breadcrumb=[{title:"Início",sref:"pagina.relatorios"},{title:"Configurações"},{title:"Certificadores",sref:"pagina.configuracao.certificador.lista"}],a.tipos=b.TIPO_CERTIFICADOR,a.opcoesAtivo=b.OPCOES_ATIVO,a.opcoesGrupo=b.OPCOES_GRUPO,a.ref={buscarAgente:!1,novoRegistro:f,filtrarAgenteTexto:""},f){var g=c.params.tipo;a.dto={tipo:b.TIPO_CERTIFICADOR.find(function(a){return a.codigo===g}),ativo:b.OPCOES_ATIVO.find(function(a){return a.valor})}}else d.get("/certificador/obter/"+e).then(function(c){a.dto=b.converterParaEscopo(c.data)},function(b){var c="Erro ao recuperar dados do Agente de Certificação";b.data&&b.data.message&&(c=b.data.message),a.$emit("msg",c,null,"error")});a.salvar=function(){var e=b.converterParaSalvar(a.dto);d.post("/certificador/salvar",e).then(function(b){a.$emit("msgNextState","Agente de Certificação salvo com sucesso",null,"success"),f?c.go("pagina.configuracao.certificador.formulario",{id:b.data.id},{reload:!0,inherit:!0,notify:!0}):c.reload()},function(b){var c="Erro inesperado salvar dados";b.data&&b.data.message&&(c=b.data.message),a.$emit("msg",c,null,"error","formulario")})},a.filtrarAgente=function(b){return b&&""!==b?(a.agentes=[],a.$emit("msgClear","filtro-promocoes"),void d.get("/certificador/buscarAgente",{params:{nome:b}}).then(function(b){a.agentes=b.data,(!b.data||b.data.length<1)&&a.$emit("msg","Nenhum Agente encontrado com o nome informado",null,"info","bag-filtro-agentes")},function(b){a.$emit("msg","Erro inesperado ao carregar a lista de Agentes",null,"error","bag-filtro-agentes")})):void(a.agentes=null)},a.selecionarAgente=function(b){a.dto.agenteId=b.id,a.dto.agenteNome=b.name,a.ref.buscarAgente=!1}}angular.module("Configuracao").controller("CertificadorFormularioCtrl",b),b.$inject=["$scope","$state","$http"],b.TIPO_CERTIFICADOR=[{codigo:"P",label:"Poder Público"},{codigo:"C",label:"Sociedade Civil"},{codigo:"M",label:"Voto de Minerva"}],b.OPCOES_ATIVO=[{valor:!0,label:"Ativo"},{valor:!1,label:"Inativo"}],b.OPCOES_GRUPO=[{valor:!0,label:"Titular"},{valor:!1,label:"Suplente"}],b.converterParaEscopo=function(a){return{id:a.id,agenteId:a.agenteId,agenteNome:a.agenteNome,tipo:b.TIPO_CERTIFICADOR.find(function(b){return b.codigo===a.tipo}),titular:b.OPCOES_GRUPO.find(function(b){return b.valor===a.titular}),ativo:b.OPCOES_ATIVO.find(function(b){return b.valor===a.ativo})}},b.converterParaSalvar=function(a){return{id:a.id,agenteId:a.agenteId?a.agenteId:a._agente.id,tipo:a.tipo.codigo,titular:a.titular.valor,ativo:a.ativo.valor}}}(window),function(a){function b(a,b,c){a.pagina.titulo="Certificadores",a.pagina.subTitulo="Listagem de Agentes de certificação",a.pagina.classTitulo="",a.pagina.ajudaTemplateUrl="",a.pagina.breadcrumb=[{title:"Início",sref:"pagina.relatorios"},{title:"Configurações"}],a.certificadores=null,a.form={},a.certificadores={},c.get("/certificador/listar").then(function(b){a.certificadores.civil={titular:b.data.filter(function(a){return"C"===a.tipo&&a.titular}),suplente:b.data.filter(function(a){return"C"===a.tipo&&!a.titular})},a.certificadores.publico={titular:b.data.filter(function(a){return"P"===a.tipo&&a.titular}),suplente:b.data.filter(function(a){return"P"===a.tipo&&!a.titular})},a.certificadores.minerva={titular:b.data.filter(function(a){return"M"===a.tipo&&a.titular}),suplente:b.data.filter(function(a){return"M"===a.tipo&&!a.titular})}})}angular.module("Configuracao").controller("CertificadorListaCtrl",b),b.$inject=["$scope","$state","$http"]}(window),function(a){function b(b,c,d){b.pagina.titulo="Critérios",b.pagina.subTitulo="Critérios usados para avaliação de uma Inscrição",b.pagina.classTitulo="",b.pagina.ajudaTemplateUrl="modules/Configuracao/templates/ajuda/CriteriosAjudaPagina.html",b.pagina.breadcrumb=[{title:"Início",sref:"pagina.relatorios"},{title:"Configurações"}],b.criterios=[],b.listaVazia=null,b.botoes=[{title:"Adicionar Critério",click:function(){b.criterios.push({ordem:b.criterios.length+100,descricao:""})}}],d.get("/criterio/listar").then(function(a){b.criterios=a.data,(null===b.criterios||b.criterios.length<1)&&(b.criterios=[{ordem:1,descricao:""}]),b.listaVazia=angular.copy(b.criterios)}),b.salvar=function(){d.post("/criterio/salvar",b.criterios).then(function(a){b.$emit("msg","Critérios de Avaliação salvos com sucesso",null,"success","formCriterios")},function(c){b.$emit("msg","Erro inesperado ao salvar as Configurações",null,"error","formCriterios"),a.console&&console.warn&&console.warn(c)})},b.limpar=function(){b.criterios=angular.copy(b.listaVazia)},b.removerCriterio=function(a){if(!(b.criterios.length<2)){var c=b.criterios.indexOf(a);c>=0&&b.criterios.splice(c,1)}}}angular.module("Configuracao").controller("CriteriosCtrl",b),b.$inject=["$scope","$state","$http"]}(window),function(a){"use strict";function b(){return{restrict:"E",templateUrl:"modules/Configuracao/templates/CertificadorListaTabela.html",scope:{certificadores:"=",descricao:"@",tipo:"@",grupo:"@"}}}angular.module("Configuracao").directive("certificadorListaTabela",b)}(window),function(a){"use strict";function b(a,b){return{restrict:"E",require:["^form","ngModel"],templateUrl:"modules/Configuracao/templates/InputAgenteDirective.html",scope:{ngModel:"=",label:"@",help:"@",col:"@",colInput:"@",required:"=",disabled:"=",readonly:"="},link:function(c,d,e,f){c.baseForm=f[0],c.ngModelCtrl=f[1],c.tcInputName="_input_cbo_"+e.ngModel.replace(/[^a-z0-9]/gi,"_")+"_"+ +new Date,c.buscar=function(d){var e=b.defer();return a.get("/certificador/buscarAgente",{params:{nome:d}}).then(function(a){e.resolve(a.data),(!a.data||a.data.length<1)&&c.$emit("msg","Nenhum Agente encontrado com o nome informado",null,"info","bag-filtro-agentes")},function(a,b){c.$emit("msg","Erro inesperado ao carregar a lista de Agentes",null,"error","bag-filtro-agentes"),e.reject(a)}),e.promise}}}}angular.module("Configuracao").directive("inputAgente",b),b.$inject=["$http","$q"]}(window),angular.module("Configuracao").run(["$templateCache",function(a){a.put("modules/Configuracao/templates/ajuda/CriteriosAjudaPagina.html","<div><strong>Critérios de avaliação</strong><p>Informe aqui os critérios que serão usados no processo de certificação pelos avaliadores.</p></div>"),a.put("modules/Configuracao/templates/CertificadorFormulario.html",'<div ng-controller="CertificadorFormularioCtrl" ng-cloak><tc-form name="formCertificador" on-save="salvar()"><div class="col-md-12"><tc-notitication id="formulario"></tc-notitication></div><input-agente ng-if="ref.novoRegistro" ng-model="dto._agente" label="Agente Certificador" help="Selecione o Agente Certificador." col-input="4" required="true"></input-agente><tc-input ng-if="!ref.novoRegistro" ng-model="dto.agenteNome" label="Agente Certificador" col-input="4" readonly="true"></tc-input><tc-select ng-model="dto.tipo" label="Tipo de Certificador" help="Selecione o tipo do certificador sendo cadastrado." col-input="3" field="label" order="codigo" options="tipos" required="true" disabled="!ref.novoRegistro"></tc-select><tc-select ng-model="dto.titular" label="Grupo" help="Informe se este Certificador é Titular ou Suplente" col-input="2" field="label" options="opcoesGrupo" required="true"></tc-select><tc-select ng-model="dto.ativo" ng-if="!ref.novoRegistro" label="Status do registro" help="Informe se este Certificador está ativo ou não." col-input="2" field="label" options="opcoesAtivo" required="true"></tc-select></tc-form></div>'),a.put("modules/Configuracao/templates/CertificadorLista.html",'<div ng-controller="CertificadorListaCtrl" ng-cloak class="lista-certificadores"><uib-tabset><uib-tab><uib-tab-heading><span class="hidden-xs">Poder</span> Público <span class="badge">{{certificadores.publico.titular.length|| 0}}-{{certificadores.publico.suplente.length|| 0}}</span></uib-tab-heading><header class="section-header row"><h2 class="col-md-12">Titulares</h2></header><certificador-lista-tabela certificadores="certificadores.publico.titular" descricao="Titulares do Poder Público"></certificador-lista-tabela><header class="section-header row"><h2 class="col-md-12">Suplentes</h2></header><certificador-lista-tabela certificadores="certificadores.publico.suplente" descricao="Suplentes do Poder Público"></certificador-lista-tabela></uib-tab><uib-tab><uib-tab-heading><span class="hidden-xs">Sociedade</span> Civil <span class="badge">{{certificadores.civil.titular.length|| 0}}-{{certificadores.civil.suplente.length|| 0}}</span></uib-tab-heading><header class="section-header row"><h2 class="col-md-12">Titulares</h2></header><certificador-lista-tabela certificadores="certificadores.civil.titular" descricao="Titulares da Sociedade Civil"></certificador-lista-tabela><header class="section-header row"><h2 class="col-md-12">Suplentes</h2></header><certificador-lista-tabela certificadores="certificadores.civil.suplente" descricao="Suplentes da Sociedade Civil"></certificador-lista-tabela></uib-tab><uib-tab><uib-tab-heading><span class="hidden-xs">Voto de</span> Minerva <span class="badge">{{certificadores.minerva.titular.length|| 0}}-{{certificadores.minerva.suplente.length|| 0}}</span></uib-tab-heading><header class="section-header row"><h2 class="col-md-12">Titulares</h2></header><certificador-lista-tabela certificadores="certificadores.minerva.titular" descricao="Titulares com Voto de Minerva"></certificador-lista-tabela><header class="section-header row"><h2 class="col-md-12">Suplentes</h2></header><certificador-lista-tabela certificadores="certificadores.minerva.suplente" descricao="Suplentes com Voto de Minerva"></certificador-lista-tabela></uib-tab></uib-tabset><div class="row"><div class="form-buttons col-md-12"><div class="text-right form-buttons-content"><span><span>&nbsp;</span> <a class="btn btn-primary" ui-sref="pagina.configuracao.certificador.formulario">Adicionar Certificador</a></span></div></div></div></div>'),a.put("modules/Configuracao/templates/CertificadorListaTabela.html",'<div class="row"><div class="list-group list-view-pf list-view-pf-view" ng-show="certificadores.length > 0"><div class="list-group-item" ng-repeat="certificador in certificadores| orderBy: \'-isActive\'"><div class="list-view-pf-actions"><button class="btn btn-primary" type="button" ui-sref="pagina.configuracao.certificador.formulario({id:{{certificador.id}}})">Editar</button></div><div class="list-view-pf-main-info"><div class="list-view-pf-left"><span class="pficon pficon-ok list-view-pf-icon-md list-view-pf-icon-success" ng-show="certificador.ativo" title="Ativo"></span> <span class="pficon pficon-error-circle-o list-view-pf-icon-md list-view-pf-icon-danger" ng-hide="certificador.ativo" title="Inativo"></span></div><div class="list-view-pf-body"><div class="list-view-pf-description"><div class="list-group-item-heading">{{certificador.agenteNome}}</div></div><div class="list-view-pf-additional-info"><div class="list-view-pf-additional-info-item" title="{{certificador.avaliacoesPendentes}} Avaliações Pendentes"><span class="pficon glyphicon glyphicon-time"></span> <strong>{{certificador.avaliacoesPendentes}}</strong> Pendentes</div><div class="list-view-pf-additional-info-item" title="{{certificador.avaliacoesEmAnalise}} Avaliações Em Análise"><span class="pficon glyphicon glyphicon-play-circle"></span> <strong>{{certificador.avaliacoesEmAnalise}}</strong> Em Análise</div><div class="list-view-pf-additional-info-item" title="{{certificador.avaliacoesFinalizadas}} Avaliações Finalizados"><span class="pficon glyphicon glyphicon-ok-circle"></span> <strong>{{certificador.avaliacoesFinalizadas}}</strong> Finalizados</div></div></div></div></div></div><div class="blank-slate-pf" ng-hide="certificadores.length > 0"><p>Adicione novos agentes certificadores {{descricao}} pelo botão <strong>Adicionar Certificador</strong> abaixo.</p></div></div>'),a.put("modules/Configuracao/templates/Criterios.html",'<div ng-controller="CriteriosCtrl" ng-cloak><tc-form on-save="salvar()" on-clear="limpar()" buttons="botoes" name="formCriterios"><div ng-repeat="criterio in criterios | orderBy:\'ordem\'"><tc-input-text label="{{$index+1}}º Critério" ng-model="criterio.descricao" required="true"></tc-input-text><div class="text-right col-md-12 form-group" ng-if="criterios.length > 1"><button class="btn btn-warning" type="button" ng-click="removerCriterio(criterio)">Remover {{$index+1}}º critério</button></div></div></tc-form></div>'),a.put("modules/Configuracao/templates/InputAgenteDirective.html",'<div class="tc-input col-md-{{col|| 12}}"><tc-base-field><div class="row"><div class="col-md-{{colInput|| 12}}"><input id="{{tcInputName}}" name="{{tcInputName}}" class="form-control" ng-model="$parent.ngModel" ng-required="required" ng-disabled="disabled" ng-readonly="readonly" ondrop="return false" aria-describedby="{{tcInputName}}-help" uib-typeahead="agent as agent.name for agent in buscar($viewValue)" typeahead-template-url="modules/Configuracao/templates/InputAgenteDirectiveItem.html" typeahead-show-hint="true" typeahead-wait-ms="400" typeahead-min-length="3" typeahead-editable="false"></div></div></tc-base-field></div>'),a.put("modules/Configuracao/templates/InputAgenteDirectiveItem.html",'<a title="{{match.model.name}}" class="cbo"><span ng-bind-html="::(\'#\'+match.model.userId +\' - \' + match.label) | uibTypeaheadHighlight:query"></span></a>')}]),b.true=a}({},function(){return this}());